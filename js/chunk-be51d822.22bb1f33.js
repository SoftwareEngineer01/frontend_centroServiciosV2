(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-be51d822"],{"223c":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"toastification"},[r("div",{staticClass:"d-flex align-items-start"},[r("b-avatar",{staticClass:"mr-75 flex-shrink-0",attrs:{variant:t.variant,size:"1.8rem"}},[r("feather-icon",{attrs:{icon:t.icon,size:"15"}})],1),r("div",{staticClass:"d-flex flex-grow-1"},[r("div",[t.title?r("h5",{staticClass:"mb-0 font-weight-bolder toastification-title",class:"text-"+t.variant,domProps:{textContent:t._s(t.title)}}):t._e(),t.text?r("small",{staticClass:"d-inline-block text-body",domProps:{textContent:t._s(t.text)}}):t._e()]),r("span",{staticClass:"cursor-pointer toastification-close-icon ml-auto ",on:{click:function(e){return t.$emit("close-toast")}}},[t.hideClose?t._e():r("feather-icon",{staticClass:"text-body",attrs:{icon:"XIcon"}})],1)])],1)])},a=[],i=r("e8a3"),s={components:{BAvatar:i["a"]},props:{variant:{type:String,default:"primary"},icon:{type:String,default:null},title:{type:String,default:null},text:{type:String,default:null},hideClose:{type:Boolean,default:!1}}},o=s,c=(r("b549"),r("2877")),u=Object(c["a"])(o,n,a,!1,null,"55dd3057",null);e["a"]=u.exports},3871:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-card",{attrs:{title:"Solicitud de Compra"}},[r("div",[r("validation-observer",{ref:"form_purchases",scopedSlots:t._u([{key:"default",fn:function(e){var n=e.invalid;return[r("b-form",{ref:"formPurchases",staticClass:"repeater-form",style:{height:t.trHeight},on:{submit:function(e){return e.preventDefault(),t.repeateAgain.apply(null,arguments)}}},[t.validationErrors?r("ErrorValidation",{attrs:{errors:t.validationErrors}}):t._e(),r("h4",[t._v("Realizarás una solicitud de compra por "+t._s(t.text))]),r("h5",[t._v("Si deseas cambiar el tipo de solicitud pulsa en el siguiente boton")]),r("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],staticClass:"mt-1",attrs:{variant:"outline-primary"},on:{click:t.togglePurchaseType}},[t._v(" Cambiar a "+t._s(t.text2)+" ")]),r("br"),r("br"),t._l(t.items,(function(e,n){return r("b-row",{key:e.id,ref:"row",refInFor:!0,attrs:{id:e.id}},[t.purchaseType?r("b-col",{attrs:{md:"4"}},[r("validation-provider",{attrs:{name:"Código del Inventario",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.errors;return[r("b-form-group",{attrs:{label:"Buscar por Código y Referencia del Inventario","label-for":"inventoryCode",state:!(a.length>0)&&null}},[r("v-select",{attrs:{label:"coderef",dir:t.$store.state.appConfig.isRTL?"rtl":"ltr",options:t.inventoryCodes,reduce:function(t){return t.id},clearable:!0,"input-id":"inventoryCode",placeholder:"Seleccione el código"},model:{value:e.store_inventories_id,callback:function(r){t.$set(e,"store_inventories_id",r)},expression:"item.store_inventories_id"}}),r("b-form-invalid-feedback",{attrs:{state:!(a.length>0)&&null}},[t._v(" "+t._s(a[0])+" ")])],1)]}}],null,!0)})],1):r("b-col",{attrs:{md:"2"}},[r("b-form-group",{attrs:{label:"Referencia","label-for":"reference"}},[r("validation-provider",{attrs:{name:"referencia",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.errors;return[r("b-form-input",{attrs:{id:"reference",placeholder:"Referencia del artículo",state:!(a.length>0)&&null},model:{value:e.article_reference,callback:function(r){t.$set(e,"article_reference",r)},expression:"item.article_reference"}}),r("small",{staticClass:"text-danger"},[t._v(t._s(a[0]))])]}}],null,!0)})],1)],1),r("b-col",{attrs:{md:"2"}},[r("b-form-group",{attrs:{label:"Cantidad","label-for":"quantity"}},[r("validation-provider",{attrs:{name:"cantidad",rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.errors;return[r("b-form-input",{attrs:{id:"quantity",type:"number",state:!(a.length>0)&&null},model:{value:e.quantity_requested,callback:function(r){t.$set(e,"quantity_requested",r)},expression:"item.quantity_requested"}}),r("small",{staticClass:"text-danger"},[t._v(t._s(a[0]))])]}}],null,!0)})],1)],1),r("b-col",{attrs:{md:"3"}},[r("validation-provider",{attrs:{name:"Centros de Costo",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.errors;return[r("b-form-group",{attrs:{label:"¿Qué uso le dará?","label-for":"userCostCenter",state:!(a.length>0)&&null}},[r("v-select",{attrs:{label:"description",dir:t.$store.state.appConfig.isRTL?"rtl":"ltr",options:t.userCostCenters,reduce:function(t){return t.id},clearable:!0,"input-id":"userCostCenter",placeholder:"Seleccione"},model:{value:e.cost_centers_id,callback:function(r){t.$set(e,"cost_centers_id",r)},expression:"item.cost_centers_id"}}),r("b-form-invalid-feedback",{attrs:{state:!(a.length>0)&&null}},[t._v(" "+t._s(a[0])+" ")])],1)]}}],null,!0)})],1),r("b-col",{staticClass:"mb-50",attrs:{lg:"2",md:"3"}},[r("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(234, 84, 85, 0.15)",expression:"'rgba(234, 84, 85, 0.15)'",modifiers:{400:!0}}],staticClass:"mt-0 mt-md-2",attrs:{variant:"outline-danger"},on:{click:function(e){return t.removeItem(n)}}},[r("feather-icon",{staticClass:"mr-25",attrs:{icon:"XIcon"}}),r("span",[t._v("Eliminar")])],1)],1),r("b-col",{attrs:{cols:"12"}},[r("hr")])],1)})),r("div",[r("label",{attrs:{for:"textarea-default"}},[t._v("Descripción de la compra")]),r("validation-provider",{attrs:{name:"descripcion",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[r("b-form-textarea",{attrs:{id:"textarea-default",placeholder:"Escriba la descripción de la compra",rows:"3",state:!(n.length>0)&&null},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),r("small",{staticClass:"text-danger"},[t._v(t._s(n[0]))])]}}],null,!0)})],1),r("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mr-2 my-1",attrs:{variant:"secondary"},on:{click:t.repeateAgain}},[r("feather-icon",{staticClass:"mr-25",attrs:{icon:"PlusIcon"}}),r("span",[t._v("Agregar Campos")])],1),r("b-button",{staticClass:"my-1",attrs:{variant:"success",disabled:n},on:{click:t.addPurchase}},[r("feather-icon",{staticClass:"mr-25",attrs:{icon:"CheckIcon"}}),r("span",[t._v("Registrar Solicitud")])],1)],2)]}}])})],1)])},a=[],i=r("1da1"),s=(r("96cf"),r("a434"),r("159b"),r("a4d3"),r("e01a"),r("11de")),o=r("a15b"),c=r("b28b"),u=r("1947"),l=r("8226"),d=r("4797"),f=r("205f"),p=r("9c7d"),v=r("c3e6"),h=r("bf9a"),m=r("e009"),b=r("4a7a"),g=r.n(b),_=r("d008"),y=r("93d6"),C=r("85c9"),x=r("223c"),k={components:{BForm:s["a"],BRow:o["a"],BCol:c["a"],BButton:u["a"],BFormGroup:l["a"],BFormInput:d["a"],BCard:f["a"],BFormTextarea:p["a"],BFormCheckbox:v["a"],vSelect:g.a},directives:{Ripple:m["a"]},mixins:[h["a"]],data:function(){return{purchaseType:!0,text:"Inventario",text2:"Directo",validationErrors:"",inventoryCodes:[],userCostCenters:[],data:[],description:"",maintenance_id:"",items:[{id:1,cost_centers_id:null,store_inventories_id:null,quantity_requested:0,article_reference:""}],nextInventoryEntryId:1}},mounted:function(){this.initTrHeight()},created:function(){window.addEventListener("resize",this.initTrHeight),this.getInventoryCodes(),this.getUserCostCenters()},destroyed:function(){window.removeEventListener("resize",this.initTrHeight)},methods:{repeateAgain:function(){var t=this;this.items.push({id:this.nextInventoryEntryId+=this.nextInventoryEntryId,store_inventories_id:1}),this.$nextTick((function(){t.trAddHeight(t.$refs.row[0].offsetHeight)}))},removeItem:function(t){this.items.splice(t,1),this.trTrimHeight(this.$refs.row[0].offsetHeight)},initTrHeight:function(){var t=this;this.trSetHeight(null),this.$nextTick((function(){t.trSetHeight(t.$refs.form_purchases.scrollHeight)}))},togglePurchaseType:function(){this.purchaseType=!this.purchaseType,this.text=this.purchaseType?"Inventario":"Directo",this.text2=this.purchaseType?"Directo":"Inventario",this.clearForm()},addPurchase:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.items.forEach((function(t){return null==t.store_inventories_id?t.store_inventories_id=1:t.store_inventories_id=t.store_inventories_id,t})),t.data.push({purchase_type_id:t.purchaseType?1:2,origin_purchase_id:""===t.maintenance_id?1:2,maintenance_id:""===t.maintenance_id?"N.A":t.maintenance_id,priority_id:""===t.maintenance_id?3:1,status_id:1,description:t.description,purchase_details:t.items}),e.next=5,t.$refs.form_purchases.validate();case 5:if(r=e.sent,r){e.next=10;break}t.showToast("Alerta","AlertTriangleIcon","Validar el formulario","warning"),e.next=14;break;case 10:return e.next=12,C["a"](t.data);case 12:n=e.sent,200===n.status&&(t.clearForm(),t.showToast("Agregado","CheckIcon","Se registra la compra correctamente","success"));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](0),422===e.t0.response.status&&(t.validationErrors=e.t0.response.data.data);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))()},getInventoryCodes:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_["e"]();case 3:r=e.sent,200===r.status&&(t.inventoryCodes=r.data.data),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),422===e.t0.response.status&&(n=e.t0.response.data.errors,t.showToast("Advertencia!","AlertCircleIcon",n,"warning"));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getUserCostCenters:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=localStorage.getItem("userData"),n=JSON.parse(r),a=n.id,e.next=6,y["c"](a);case 6:i=e.sent,200===i.status&&(t.userCostCenters=i.data.data),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),422===e.t0.response.status&&(s=e.t0.response.data.errors,t.showToast("Advertencia!","AlertCircleIcon",s,"warning"));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},clearForm:function(){this.$refs.formPurchases.reset(),this.validationErrors="",this.data=[],this.items=[{cost_centers_id:null,store_inventories_id:null,quantity_requested:0,article_reference:""}]},showToast:function(t,e,r,n){this.$toast({component:x["a"],props:{title:t,icon:e,text:r,variant:n}})}}},w=k,S=(r("6cd5"),r("2877")),I=Object(S["a"])(w,n,a,!1,null,"0070b5c7",null);e["default"]=I.exports},"49b5":function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));r("ac1f"),r("5319");var n=r("bc3a"),a=r.n(n),i=r("4360");function s(){return a.a.create({baseURL:i["a"].state.api.apiURL,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("accessToken").replace(/['"]+/g,""))}})}},5319:function(t,e,r){"use strict";var n=r("d784"),a=r("825a"),i=r("7b0b"),s=r("50c4"),o=r("a691"),c=r("1d80"),u=r("8aa5"),l=r("14c3"),d=Math.max,f=Math.min,p=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,h=/\$([$&'`]|\d\d?)/g,m=function(t){return void 0===t?t:String(t)};n("replace",2,(function(t,e,r,n){var b=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=n.REPLACE_KEEPS_$0,_=b?"$":"$0";return[function(r,n){var a=c(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,a,n):e.call(String(a),r,n)},function(t,n){if(!b&&g||"string"===typeof n&&-1===n.indexOf(_)){var i=r(e,t,this,n);if(i.done)return i.value}var c=a(t),p=String(this),v="function"===typeof n;v||(n=String(n));var h=c.global;if(h){var C=c.unicode;c.lastIndex=0}var x=[];while(1){var k=l(c,p);if(null===k)break;if(x.push(k),!h)break;var w=String(k[0]);""===w&&(c.lastIndex=u(p,s(c.lastIndex),C))}for(var S="",I=0,T=0;T<x.length;T++){k=x[T];for(var E=String(k[0]),$=d(f(o(k.index),p.length),0),A=[],H=1;H<k.length;H++)A.push(m(k[H]));var j=k.groups;if(v){var O=[E].concat(A,$,p);void 0!==j&&O.push(j);var R=String(n.apply(void 0,O))}else R=y(E,p,$,A,j,n);$>=I&&(S+=p.slice(I,$)+R,I=$+E.length)}return S+p.slice(I)}];function y(t,r,n,a,s,o){var c=n+t.length,u=a.length,l=h;return void 0!==s&&(s=i(s),l=v),e.call(o,l,(function(e,i){var o;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return r.slice(0,n);case"'":return r.slice(c);case"<":o=s[i.slice(1,-1)];break;default:var l=+i;if(0===l)return e;if(l>u){var d=p(l/10);return 0===d?e:d<=u?void 0===a[d-1]?i.charAt(1):a[d-1]+i.charAt(1):e}o=a[l-1]}return void 0===o?"":o}))}}))},"6cd5":function(t,e,r){"use strict";r("c3ed")},"85c9":function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return i}));var n=r("49b5");function a(t){return Object(n["a"])().post("/purchase",t)}function i(){return Object(n["a"])().get("/purchases")}},"8d81":function(t,e,r){},"93d6":function(t,e,r){"use strict";r.d(e,"d",(function(){return a})),r.d(e,"c",(function(){return i})),r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return o}));var n=r("49b5");function a(){return Object(n["a"])().get("/users")}function i(t){return Object(n["a"])().get("/user_costcenter/".concat(t))}function s(t){return Object(n["a"])().post("/users",t)}function o(t){return Object(n["a"])().post("/user/".concat(t))}},b549:function(t,e,r){"use strict";r("8d81")},bf9a:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("a9e3");var n={data:function(){return{trHeight:null}},methods:{trAddHeight:function(t){var e=Number(this.trHeight.substring(0,this.trHeight.length-2));this.trHeight="".concat(e+Number(t),"px")},trTrimHeight:function(t){var e=Number(this.trHeight.substring(0,this.trHeight.length-2));this.trHeight="".concat(e-Number(t),"px")},trSetHeight:function(t){this.trHeight=null===t?"auto":"".concat(Number(t),"px")}}}},c3ed:function(t,e,r){},d008:function(t,e,r){"use strict";r.d(e,"d",(function(){return a})),r.d(e,"e",(function(){return i})),r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return o})),r.d(e,"h",(function(){return c})),r.d(e,"f",(function(){return u})),r.d(e,"g",(function(){return l})),r.d(e,"c",(function(){return d}));var n=r("49b5");function a(){return Object(n["a"])().get("/store_inventory")}function i(){return Object(n["a"])().get("/inventory_codes")}function s(t){return Object(n["a"])().post("/store_inventory",t)}function o(t){return Object(n["a"])().post("/store_inventory/".concat(t))}function c(t,e){return Object(n["a"])().put("/store_inventory/".concat(t),e)}function u(){return Object(n["a"])().get("/store_inventory_entries")}function l(t){return Object(n["a"])().post("/store_inventory_entry",t)}function d(t){return Object(n["a"])().post("/store_inventory_entry_delete/".concat(t))}}}]);
//# sourceMappingURL=chunk-be51d822.22bb1f33.js.map